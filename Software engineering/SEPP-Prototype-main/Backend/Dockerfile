# Use a base image that includes JDK
FROM openjdk:21-jdk-slim

# Set the working directory
WORKDIR /app

# Copy the Gradle wrapper files to the Docker image
COPY gradlew gradlew.bat ./

# Copy the Gradle wrapper configuration directory
COPY gradle gradle/

# Copy the build.gradle and settings.gradle files to the Docker image
COPY build.gradle settings.gradle ./

# Copy the entire source code to the Docker image
COPY src ./src

# Make the gradlew script executable
RUN chmod +x gradlew

# Run Gradle build to generate the JAR file
RUN ./gradlew build

# Copy the JAR file generated by Gradle to the image
COPY build/libs/*.jar app.jar

# Expose port for the application
EXPOSE 8080

# Run the application
ENTRYPOINT ["java", "-jar", "app.jar"]
